import{r as v,j as a,e as Ie,u as O,g as ke,h as Re,a as Me,c as C,b as Pe,i as Le,n as _e,k as Ae,f as k,C as E,d as He,R as Fe}from"./js/clsx.js";const he=v.createContext({dragDropManager:void 0});function w(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var te=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),re=function(){return Math.random().toString(36).substring(7).split("").join(".")},ne={INIT:"@@redux/INIT"+re(),REPLACE:"@@redux/REPLACE"+re()};function Ue(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pe(t,e,r){var s;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(w(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(w(1));return r(pe)(t,e)}if(typeof t!="function")throw new Error(w(2));var n=t,i=e,c=[],o=c,d=!1;function l(){o===c&&(o=c.slice())}function p(){if(d)throw new Error(w(3));return i}function u(y){if(typeof y!="function")throw new Error(w(4));if(d)throw new Error(w(5));var g=!0;return l(),o.push(y),function(){if(g){if(d)throw new Error(w(6));g=!1,l();var D=o.indexOf(y);o.splice(D,1),c=null}}}function m(y){if(!Ue(y))throw new Error(w(7));if(typeof y.type>"u")throw new Error(w(8));if(d)throw new Error(w(9));try{d=!0,i=n(i,y)}finally{d=!1}for(var g=c=o,b=0;b<g.length;b++){var D=g[b];D()}return y}function f(y){if(typeof y!="function")throw new Error(w(10));n=y,m({type:ne.REPLACE})}function x(){var y,g=u;return y={subscribe:function(D){if(typeof D!="object"||D===null)throw new Error(w(11));function T(){D.next&&D.next(p())}T();var j=g(T);return{unsubscribe:j}}},y[te]=function(){return this},y}return m({type:ne.INIT}),s={dispatch:m,subscribe:u,getState:p,replaceReducer:f},s[te]=x,s}function h(t,e,...r){if($e()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;s=new Error(e.replace(/%s/g,function(){return r[n++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}function $e(){return typeof process<"u"&&!0}function qe(t,e,r){return e.split(".").reduce((s,n)=>s&&s[n]?s[n]:r||null,t)}function Ge(t,e){return t.filter(r=>r!==e)}function me(t){return typeof t=="object"}function Be(t,e){const r=new Map,s=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(s),e.forEach(s);const n=[];return r.forEach((i,c)=>{i===1&&n.push(c)}),n}function Ve(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Y="dnd-core/INIT_COORDS",_="dnd-core/BEGIN_DRAG",W="dnd-core/PUBLISH_DRAG_SOURCE",A="dnd-core/HOVER",H="dnd-core/DROP",F="dnd-core/END_DRAG";function se(t,e){return{type:Y,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const ze={type:Y,payload:{clientOffset:null,sourceClientOffset:null}};function Xe(t){return function(r=[],s={publishSource:!0}){const{publishSource:n=!0,clientOffset:i,getSourceClientOffset:c}=s,o=t.getMonitor(),d=t.getRegistry();t.dispatch(se(i)),Ye(r,o,d);const l=Qe(r,o);if(l==null){t.dispatch(ze);return}let p=null;if(i){if(!c)throw new Error("getSourceClientOffset must be defined");We(c),p=c(l)}t.dispatch(se(i,p));const m=d.getSource(l).beginDrag(o,l);if(m==null)return;Je(m),d.pinSource(l);const f=d.getSourceType(l);return{type:_,payload:{itemType:f,item:m,sourceId:l,clientOffset:i||null,sourceClientOffset:p||null,isSourcePublic:!!n}}}}function Ye(t,e,r){h(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(s){h(r.getSource(s),"Expected sourceIds to be registered.")})}function We(t){h(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Je(t){h(me(t),"Item must be an object.")}function Qe(t,e){let r=null;for(let s=t.length-1;s>=0;s--)if(e.canDragSource(t[s])){r=t[s];break}return r}function Ze(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ke(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),s.forEach(function(n){Ze(t,n,r[n])})}return t}function et(t){return function(r={}){const s=t.getMonitor(),n=t.getRegistry();tt(s),st(s).forEach((c,o)=>{const d=rt(c,o,n,s),l={type:H,payload:{dropResult:Ke({},r,d)}};t.dispatch(l)})}}function tt(t){h(t.isDragging(),"Cannot call drop while not dragging."),h(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function rt(t,e,r,s){const n=r.getTarget(t);let i=n?n.drop(s,t):void 0;return nt(i),typeof i>"u"&&(i=e===0?{}:s.getDropResult()),i}function nt(t){h(typeof t>"u"||me(t),"Drop result must either be an object or undefined.")}function st(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function it(t){return function(){const r=t.getMonitor(),s=t.getRegistry();at(r);const n=r.getSourceId();return n!=null&&(s.getSource(n,!0).endDrag(r,n),s.unpinSource()),{type:F}}}function at(t){h(t.isDragging(),"Cannot call endDrag while not dragging.")}function V(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function ot(t){return function(r,{clientOffset:s}={}){ct(r);const n=r.slice(0),i=t.getMonitor(),c=t.getRegistry(),o=i.getItemType();return dt(n,c,o),lt(n,i,c),ut(n,i,c),{type:A,payload:{targetIds:n,clientOffset:s||null}}}}function ct(t){h(Array.isArray(t),"Expected targetIds to be an array.")}function lt(t,e,r){h(e.isDragging(),"Cannot call hover while not dragging."),h(!e.didDrop(),"Cannot call hover after drop.");for(let s=0;s<t.length;s++){const n=t[s];h(t.lastIndexOf(n)===s,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(n);h(i,"Expected targetIds to be registered.")}}function dt(t,e,r){for(let s=t.length-1;s>=0;s--){const n=t[s],i=e.getTargetType(n);V(i,r)||t.splice(s,1)}}function ut(t,e,r){t.forEach(function(s){r.getTarget(s).hover(e,s)})}function gt(t){return function(){if(t.getMonitor().isDragging())return{type:W}}}function ft(t){return{beginDrag:Xe(t),publishDragSource:gt(t),hover:ot(t),drop:et(t),endDrag:it(t)}}class ht{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function s(i){return(...c)=>{const o=i.apply(e,c);typeof o<"u"&&r(o)}}const n=ft(this);return Object.keys(n).reduce((i,c)=>{const o=n[c];return i[c]=s(o),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const s=this.store.getState().refCount>0;this.backend&&(s&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!s&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function pt(t,e){return{x:t.x+e.x,y:t.y+e.y}}function ve(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mt(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:s}=t;return!e||!r||!s?null:ve(pt(e,s),r)}function vt(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:ve(e,r)}const R=[],J=[];R.__IS_NONE__=!0;J.__IS_ALL__=!0;function yt(t,e){return t===R?!1:t===J||typeof e>"u"?!0:Ve(e,t).length>0}class bt{subscribeToStateChange(e,r={}){const{handlerIds:s}=r;h(typeof e=="function","listener must be a function."),h(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;const i=()=>{const c=this.store.getState(),o=c.stateId;try{o===n||o===n+1&&!yt(c.dirtyHandlerIds,s)||e()}finally{n=o}};return this.store.subscribe(i)}subscribeToOffsetChange(e){h(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const s=()=>{const n=this.store.getState().dragOffset;n!==r&&(r=n,e())};return this.store.subscribe(s)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return h(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(h(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const s=this.registry.getTargetType(e),n=this.getItemType();return V(s,n)&&r.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(h(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const s=this.registry.getSourceType(e),n=this.getItemType();return s!==n?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:s}=r;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!V(n,i))return!1;const c=this.getTargetIds();if(!c.length)return!1;const o=c.indexOf(e);return s?o===c.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return mt(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return vt(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const ie=typeof global<"u"?global:self,ye=ie.MutationObserver||ie.WebKitMutationObserver;function be(t){return function(){const r=setTimeout(n,0),s=setInterval(n,50);function n(){clearTimeout(r),clearInterval(s),t()}}}function xt(t){let e=1;const r=new ye(t),s=document.createTextNode("");return r.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}const Dt=typeof ye=="function"?xt:be;class Tt{enqueueTask(e){const{queue:r,requestFlush:s}=this;r.length||(s(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let s=0,n=e.length-this.index;s<n;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Dt(this.flush),this.requestErrorThrow=be(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class St{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Ot{create(e){const r=this.freeTasks,s=r.length?r.pop():new St(this.onError,n=>r[r.length]=n);return s.task=e,s}constructor(e){this.onError=e,this.freeTasks=[]}}const xe=new Tt,wt=new Ot(xe.registerPendingError);function Nt(t){xe.enqueueTask(wt.create(t))}const Q="dnd-core/ADD_SOURCE",Z="dnd-core/ADD_TARGET",K="dnd-core/REMOVE_SOURCE",U="dnd-core/REMOVE_TARGET";function Et(t){return{type:Q,payload:{sourceId:t}}}function Ct(t){return{type:Z,payload:{targetId:t}}}function jt(t){return{type:K,payload:{sourceId:t}}}function It(t){return{type:U,payload:{targetId:t}}}function kt(t){h(typeof t.canDrag=="function","Expected canDrag to be a function."),h(typeof t.beginDrag=="function","Expected beginDrag to be a function."),h(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Rt(t){h(typeof t.canDrop=="function","Expected canDrop to be a function."),h(typeof t.hover=="function","Expected hover to be a function."),h(typeof t.drop=="function","Expected beginDrag to be a function.")}function z(t,e){if(e&&Array.isArray(t)){t.forEach(r=>z(r,!1));return}h(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var N;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(N||(N={}));let Mt=0;function Pt(){return Mt++}function Lt(t){const e=Pt().toString();switch(t){case N.SOURCE:return`S${e}`;case N.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function ae(t){switch(t[0]){case"S":return N.SOURCE;case"T":return N.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function oe(t,e){const r=t.entries();let s=!1;do{const{done:n,value:[,i]}=r.next();if(i===e)return!0;s=!!n}while(!s);return!1}class _t{addSource(e,r){z(e),kt(r);const s=this.addHandler(N.SOURCE,e,r);return this.store.dispatch(Et(s)),s}addTarget(e,r){z(e,!0),Rt(r);const s=this.addHandler(N.TARGET,e,r);return this.store.dispatch(Ct(s)),s}containsHandler(e){return oe(this.dragSources,e)||oe(this.dropTargets,e)}getSource(e,r=!1){return h(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return h(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return h(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return h(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return ae(e)===N.SOURCE}isTargetId(e){return ae(e)===N.TARGET}removeSource(e){h(this.getSource(e),"Expected an existing source."),this.store.dispatch(jt(e)),Nt(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){h(this.getTarget(e),"Expected an existing target."),this.store.dispatch(It(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);h(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){h(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,s){const n=Lt(e);return this.types.set(n,r),e===N.SOURCE?this.dragSources.set(n,s):e===N.TARGET&&this.dropTargets.set(n,s),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const At=(t,e)=>t===e;function Ht(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Ft(t,e,r=At){if(t.length!==e.length)return!1;for(let s=0;s<t.length;++s)if(!r(t[s],e[s]))return!1;return!0}function Ut(t=R,e){switch(e.type){case A:break;case Q:case Z:case U:case K:return R;case _:case W:case F:case H:default:return J}const{targetIds:r=[],prevTargetIds:s=[]}=e.payload,n=Be(r,s);if(!(n.length>0||!Ft(r,s)))return R;const c=s[s.length-1],o=r[r.length-1];return c!==o&&(c&&n.push(c),o&&n.push(o)),n}function $t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),s.forEach(function(n){$t(t,n,r[n])})}return t}const ce={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Gt(t=ce,e){const{payload:r}=e;switch(e.type){case Y:case _:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case A:return Ht(t.clientOffset,r.clientOffset)?t:qt({},t,{clientOffset:r.clientOffset});case F:case H:return ce;default:return t}}function Bt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),s.forEach(function(n){Bt(t,n,r[n])})}return t}const Vt={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function zt(t=Vt,e){const{payload:r}=e;switch(e.type){case _:return I({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case W:return I({},t,{isSourcePublic:!0});case A:return I({},t,{targetIds:r.targetIds});case U:return t.targetIds.indexOf(r.targetId)===-1?t:I({},t,{targetIds:Ge(t.targetIds,r.targetId)});case H:return I({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case F:return I({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Xt(t=0,e){switch(e.type){case Q:case Z:return t+1;case K:case U:return t-1;default:return t}}function Yt(t=0){return t+1}function Wt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),s.forEach(function(n){Wt(t,n,r[n])})}return t}function Qt(t={},e){return{dirtyHandlerIds:Ut(t.dirtyHandlerIds,{type:e.type,payload:Jt({},e.payload,{prevTargetIds:qe(t,"dragOperation.targetIds",[])})}),dragOffset:Gt(t.dragOffset,e),refCount:Xt(t.refCount,e),dragOperation:zt(t.dragOperation,e),stateId:Yt(t.stateId)}}function Zt(t,e=void 0,r={},s=!1){const n=Kt(s),i=new bt(n,new _t(n)),c=new ht(n,i),o=t(c,e,r);return c.receiveBackend(o),c}function Kt(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return pe(Qt,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function er(t,e){if(t==null)return{};var r=tr(t,e),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)s=i[n],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function tr(t,e){if(t==null)return{};var r={},s=Object.keys(t),n,i;for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}let le=0;const L=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var rr=v.memo(function(e){var{children:r}=e,s=er(e,["children"]);const[n,i]=nr(s);return v.useEffect(()=>{if(i){const c=De();return++le,()=>{--le===0&&(c[L]=null)}}},[]),a.jsx(he.Provider,{value:n,children:r})});function nr(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=sr(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function sr(t,e=De(),r,s){const n=e;return n[L]||(n[L]={dragDropManager:Zt(t,e,r,s)}),n[L]}function De(){return typeof global<"u"?global:window}var ir=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,i;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=s;n--!==0;){var c=i[n];if(!t(e[c],r[c]))return!1}return!0}return e!==e&&r!==r};const ar=Ie(ir),$=typeof window<"u"?v.useLayoutEffect:v.useEffect;function or(t,e,r){const[s,n]=v.useState(()=>e(t)),i=v.useCallback(()=>{const c=e(t);ar(s,c)||(n(c),r&&r())},[s,t,r]);return $(i),[s,i]}function cr(t,e,r){const[s,n]=or(t,e,r);return $(function(){const c=t.getHandlerId();if(c!=null)return t.subscribeToStateChange(n,{handlerIds:[c]})},[t,n]),s}function lr(t,e,r){return cr(e,t||(()=>({})),()=>r.reconnect())}function dr(t,e){const r=[];return typeof t!="function"&&r.push(t),v.useMemo(()=>typeof t=="function"?t():t,r)}let q=!1;class ur{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;h(!q,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return q=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{q=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function gr(t,e,r){const s=r.getRegistry(),n=s.addTarget(t,e);return[n,()=>s.removeTarget(n)]}function fr(t,e,r,s){let n;if(n!==void 0)return!!n;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),c=Object.keys(e);if(i.length!==c.length)return!1;const o=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<i.length;d++){const l=i[d];if(!o(l))return!1;const p=t[l],u=e[l];if(n=void 0,n===!1||n===void 0&&p!==u)return!1}return!0}function hr(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pr(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function mr(t){return(e=null,r=null)=>{if(!v.isValidElement(e)){const i=e;return t(i,r),i}const s=e;return pr(s),yr(s,r?i=>t(i,r):t)}}function vr(t){const e={};return Object.keys(t).forEach(r=>{const s=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const n=mr(s);e[r]=()=>n}}),e}function de(t,e){typeof t=="function"?t(e):t.current=e}function yr(t,e){const r=t.ref;return h(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?v.cloneElement(t,{ref:s=>{de(r,s),de(e,s)}}):v.cloneElement(t,{ref:e})}class br{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!fr(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=vr({dropTarget:(r,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,hr(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ee(){const{dragDropManager:t}=v.useContext(he);return h(t!=null,"Expected drag drop context"),t}function xr(t){return v.useMemo(()=>t.hooks.dropTarget(),[t])}function Dr(t){const e=ee(),r=v.useMemo(()=>new br(e.getBackend()),[e]);return $(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Tr(){const t=ee();return v.useMemo(()=>new ur(t),[t])}function Sr(t){const{accept:e}=t;return v.useMemo(()=>(h(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Or{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function wr(t,e){const r=v.useMemo(()=>new Or(t,e),[e]);return v.useEffect(()=>{r.spec=t},[t]),r}function Nr(t,e,r){const s=ee(),n=wr(t,e),i=Sr(t);$(function(){const[o,d]=gr(i,n,s);return e.receiveHandlerId(o),r.receiveHandlerId(o),d},[s,e,n,r,i.map(c=>c.toString()).join("|")])}function Er(t,e){const r=dr(t),s=Tr(),n=Dr(r.options);return Nr(r,s,n),[lr(r.collect,s,n),xr(n)]}function Te(t){let e=null;return()=>(e==null&&(e=t()),e)}function Cr(t,e){return t.filter(r=>r!==e)}function jr(t,e){const r=new Set,s=i=>r.add(i);t.forEach(s),e.forEach(s);const n=[];return r.forEach(i=>n.push(i)),n}class Ir{enter(e){const r=this.entered.length,s=n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e));return this.entered=jr(this.entered.filter(s),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=Cr(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class kr{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(s=>{const n=this.config.exposeProperties[s];n!=null&&(r[s]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Se="__NATIVE_FILE__",Oe="__NATIVE_URL__",we="__NATIVE_TEXT__",Ne="__NATIVE_HTML__",ue=Object.freeze(Object.defineProperty({__proto__:null,FILE:Se,HTML:Ne,TEXT:we,URL:Oe},Symbol.toStringTag,{value:"Module"}));function G(t,e,r){const s=e.reduce((n,i)=>n||t.getData(i),"");return s??r}const X={[Se]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Ne]:{exposeProperties:{html:(t,e)=>G(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Oe]:{exposeProperties:{urls:(t,e)=>G(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[we]:{exposeProperties:{text:(t,e)=>G(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Rr(t,e){const r=X[t];if(!r)throw new Error(`native type ${t} has no configuration`);const s=new kr(r);return s.loadDataTransfer(e),s}function B(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(X).filter(r=>{const s=X[r];return s!=null&&s.matchesTypes?s.matchesTypes.some(n=>e.indexOf(n)>-1):!1})[0]||null}const Mr=Te(()=>/firefox/i.test(navigator.userAgent)),Ee=Te(()=>!!window.safari);class ge{interpolate(e){const{xs:r,ys:s,c1s:n,c2s:i,c3s:c}=this;let o=r.length-1;if(e===r[o])return s[o];let d=0,l=c.length-1,p;for(;d<=l;){p=Math.floor(.5*(d+l));const f=r[p];if(f<e)d=p+1;else if(f>e)l=p-1;else return s[p]}o=Math.max(0,l);const u=e-r[o],m=u*u;return s[o]+n[o]*u+i[o]*m+c[o]*u*m}constructor(e,r){const{length:s}=e,n=[];for(let f=0;f<s;f++)n.push(f);n.sort((f,x)=>e[f]<e[x]?-1:1);const i=[],c=[];let o,d;for(let f=0;f<s-1;f++)o=e[f+1]-e[f],d=r[f+1]-r[f],i.push(o),c.push(d/o);const l=[c[0]];for(let f=0;f<i.length-1;f++){const x=c[f],y=c[f+1];if(x*y<=0)l.push(0);else{o=i[f];const g=i[f+1],b=o+g;l.push(3*b/((b+g)/x+(b+o)/y))}}l.push(c[c.length-1]);const p=[],u=[];let m;for(let f=0;f<l.length-1;f++){m=c[f];const x=l[f],y=1/i[f],g=x+l[f+1]-m-m;p.push((m-x-g)*y),u.push(g*y*y)}this.xs=e,this.ys=r,this.c1s=l,this.c2s=p,this.c3s=u}}const Pr=1;function Ce(t){const e=t.nodeType===Pr?t:t.parentElement;if(!e)return null;const{top:r,left:s}=e.getBoundingClientRect();return{x:s,y:r}}function P(t){return{x:t.clientX,y:t.clientY}}function Lr(t){var e;return t.nodeName==="IMG"&&(Mr()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function _r(t,e,r,s){let n=t?e.width:r,i=t?e.height:s;return Ee()&&t&&(i/=window.devicePixelRatio,n/=window.devicePixelRatio),{dragPreviewWidth:n,dragPreviewHeight:i}}function Ar(t,e,r,s,n){const i=Lr(e),o=Ce(i?t:e),d={x:r.x-o.x,y:r.y-o.y},{offsetWidth:l,offsetHeight:p}=t,{anchorX:u,anchorY:m}=s,{dragPreviewWidth:f,dragPreviewHeight:x}=_r(i,e,l,p),y=()=>{let S=new ge([0,.5,1],[d.y,d.y/p*x,d.y+x-p]).interpolate(m);return Ee()&&i&&(S+=(window.devicePixelRatio-1)*x),S},g=()=>new ge([0,.5,1],[d.x,d.x/l*f,d.x+f-l]).interpolate(u),{offsetX:b,offsetY:D}=n,T=b===0||b,j=D===0||D;return{x:T?b:g(),y:j?D:y()}}class Hr{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function Fr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},s=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),s.forEach(function(n){Fr(t,n,r[n])})}return t}class Ur{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,s){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,s);const n=c=>this.handleDragStart(c,e),i=c=>this.handleSelectStart(c);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",n),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",n),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const s=c=>this.handleDragEnter(c,e),n=c=>this.handleDragOver(c,e),i=c=>this.handleDrop(c,e);return r.addEventListener("dragenter",s),r.addEventListener("dragover",n),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",s),r.removeEventListener("dragover",n),r.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return fe({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return fe({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ue).some(r=>ue[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Rr(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var s;return(s=this.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,s){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=n=>{const i=this.sourceNodes.get(n);return i&&Ce(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=n=>!!(n&&this.document&&this.document.body&&this.document.body.contains(n)),this.endDragIfSourceWasRemovedFromDOM=()=>{const n=this.currentDragSourceNode;n==null||this.isNodeInDocument(n)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=n=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(n||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=n=>{if(n.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const c=P(n);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:c});const{dataTransfer:o}=n,d=B(o);if(this.monitor.isDragging()){if(o&&typeof o.setDragImage=="function"){const p=this.monitor.getSourceId(),u=this.sourceNodes.get(p),m=this.sourcePreviewNodes.get(p)||u;if(m){const{anchorX:f,anchorY:x,offsetX:y,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),T=Ar(u,m,c,{anchorX:f,anchorY:x},{offsetX:y,offsetY:g});o.setDragImage(m,T.x,T.y)}}try{o==null||o.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(n.target);const{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(o&&!o.types&&(n.target&&!n.target.hasAttribute||!n.target.hasAttribute("draggable")))return;n.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=n=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}if(!this.enterLeaveCounter.enter(n.target)||this.monitor.isDragging())return;const{dataTransfer:o}=n,d=B(o);d&&this.beginDragNativeItem(d,o)},this.handleTopDragEnter=n=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=n.altKey,i.length>0&&this.actions.hover(i,{clientOffset:P(n)}),i.some(o=>this.monitor.canDropOnTarget(o))&&(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=n=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}},this.handleTopDragOver=n=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none");return}this.altKeyPressed=n.altKey,this.lastClientOffset=P(n),this.scheduleHover(i),(i||[]).some(o=>this.monitor.canDropOnTarget(o))?(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?n.preventDefault():(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=n=>{this.isDraggingNativeItem()&&n.preventDefault(),this.enterLeaveCounter.leave(n.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=n=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;n.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}else B(n.dataTransfer)&&n.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=n=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:P(n)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=n=>{const i=n.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(n.preventDefault(),i.dragDrop()))},this.options=new Hr(r,s),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Ir(this.isNodeInDocument)}}const $r=function(e,r,s){return new Ur(e,r,s)},qr=({onEditTask:t})=>{const{tasks:e,viewMode:r,setViewMode:s,selectedDate:n,setSelectedDate:i,filter:c}=O(),o=r==="month"?ke(n):Re(n),d=u=>{r==="month"?i(_e(n,u)):r==="week"&&i(Ae(n,u))},l=e.filter(u=>!(c.status==="completed"&&!u.completed||c.status==="pending"&&u.completed||c.category&&u.category!==c.category||c.priority&&u.priority!==c.priority)),p=u=>l.filter(m=>k(m.dueDate,"yyyy-MM-dd")===k(u,"yyyy-MM-dd"));return a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-border-light dark:border-border-dark p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-text-light dark:text-text-dark",children:Me(n)}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>d("prev"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"←"}),a.jsx("button",{onClick:()=>i(new Date),className:"px-3 py-1 text-sm bg-primary-light dark:bg-primary-dark text-white rounded",children:"今日"}),a.jsx("button",{onClick:()=>d("next"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"→"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>s("month"),className:C("px-3 py-1 rounded",r==="month"?"bg-primary-light dark:bg-primary-dark text-white":"bg-gray-200 dark:bg-gray-700"),children:"月"}),a.jsx("button",{onClick:()=>s("week"),className:C("px-3 py-1 rounded",r==="week"?"bg-primary-light dark:bg-primary-dark text-white":"bg-gray-200 dark:bg-gray-700"),children:"週"}),a.jsx("button",{onClick:()=>s("day"),className:C("px-3 py-1 rounded",r==="day"?"bg-primary-light dark:bg-primary-dark text-white":"bg-gray-200 dark:bg-gray-700"),children:"日"})]})]})}),a.jsx("div",{className:"flex-1 overflow-auto p-4",children:r==="day"?a.jsx(Br,{date:n,tasks:p(n),onEditTask:t}):a.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden",children:[["日","月","火","水","木","金","土"].map((u,m)=>a.jsx("div",{className:C("p-2 text-center font-semibold bg-gray-50 dark:bg-gray-800",m===0&&"text-red-500",m===6&&"text-blue-500"),children:u},u)),o.map(u=>a.jsx(Gr,{date:u,tasks:p(u),isToday:Le(u),isCurrentMonth:Pe(u,n),onEditTask:t},u.toISOString()))]})})]})},Gr=({date:t,tasks:e,isToday:r,isCurrentMonth:s,onEditTask:n})=>{const{updateTask:i}=O(),[{isOver:c},o]=Er({accept:"task",drop:d=>{i(d.task.id,{dueDate:t})},collect:d=>({isOver:d.isOver()})});return a.jsxs("div",{ref:o,className:C("min-h-[100px] p-2 bg-white dark:bg-gray-900",r&&"bg-blue-50 dark:bg-blue-900/20",!s&&"opacity-50",c&&"bg-green-50 dark:bg-green-900/20"),children:[a.jsx("div",{className:"text-sm font-medium mb-1",children:t.getDate()}),a.jsxs("div",{className:"space-y-1",children:[e.slice(0,3).map(d=>a.jsx(je,{task:d,onClick:()=>n(d)},d.id)),e.length>3&&a.jsxs("div",{className:"text-xs text-gray-500",children:["+",e.length-3," more"]})]})]})},je=({task:t,onClick:e})=>{const{categories:r}=O(),s=r.find(n=>n.id===t.category);return a.jsx("div",{onClick:e,className:C("p-1 text-xs rounded cursor-pointer hover:opacity-80",t.completed&&"line-through opacity-60"),style:{backgroundColor:s!=null&&s.color?s.color+"20":"#f3f4f6",borderLeft:`2px solid ${(s==null?void 0:s.color)||"#9ca3af"}`},children:t.title})},Br=({date:t,tasks:e,onEditTask:r})=>{const s=Array.from({length:24},(n,i)=>i);return a.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg",children:[a.jsx("h2",{className:"text-xl font-bold p-4 border-b",children:k(t,"yyyy年M月d日 (E)")}),a.jsx("div",{className:"divide-y",children:s.map(n=>a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:"w-16 p-2 text-sm text-gray-500",children:[n.toString().padStart(2,"0"),":00"]}),a.jsx("div",{className:"flex-1 p-2 min-h-[60px]",children:e.filter(i=>i.dueDate.getHours()===n).map(i=>a.jsx(je,{task:i,onClick:()=>r(i)},i.id))})]},n))})]})},Vr=({onNewTask:t,onOpenSettings:e})=>{const{filter:r,setFilter:s,categories:n,tasks:i}=O(),c={total:i.length,pending:i.filter(o=>!o.completed).length,completed:i.filter(o=>o.completed).length,today:i.filter(o=>{const d=new Date;return o.dueDate.getDate()===d.getDate()&&o.dueDate.getMonth()===d.getMonth()&&o.dueDate.getFullYear()===d.getFullYear()}).length};return a.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-border-light dark:border-border-dark flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-border-light dark:border-border-dark",children:a.jsx("h1",{className:"text-xl font-bold text-primary-light dark:text-primary-dark",children:"Calendar TODO"})}),a.jsx("div",{className:"p-4",children:a.jsxs("button",{onClick:t,className:"w-full btn-primary flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"新規タスク"]})}),a.jsx("div",{className:"px-4 pb-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"今日"}),a.jsx("div",{className:"font-bold",children:c.today})]}),a.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded",children:[a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"未完了"}),a.jsx("div",{className:"font-bold",children:c.pending})]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto px-4",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-600 dark:text-gray-400",children:"ステータス"}),a.jsx("div",{className:"space-y-1 mb-4",children:[{value:"all",label:"すべて"},{value:"pending",label:"未完了"},{value:"completed",label:"完了済み"}].map(o=>a.jsx("button",{onClick:()=>s({status:o.value}),className:C("w-full text-left px-3 py-2 rounded text-sm",r.status===o.value?"bg-primary-light text-white dark:bg-primary-dark":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:o.label},o.value))}),a.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-600 dark:text-gray-400",children:"カテゴリ"}),a.jsxs("div",{className:"space-y-1 mb-4",children:[a.jsx("button",{onClick:()=>s({category:null}),className:C("w-full text-left px-3 py-2 rounded text-sm",r.category===null?"bg-primary-light text-white dark:bg-primary-dark":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:"すべて"}),n.map(o=>a.jsxs("button",{onClick:()=>s({category:o.id}),className:C("w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2",r.category===o.id?"bg-primary-light text-white dark:bg-primary-dark":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:[a.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),o.name]},o.id))]}),a.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-600 dark:text-gray-400",children:"優先度"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>s({priority:null}),className:C("w-full text-left px-3 py-2 rounded text-sm",r.priority===null?"bg-primary-light text-white dark:bg-primary-dark":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:"すべて"}),[{value:"high",label:"高",color:"text-red-500"},{value:"medium",label:"中",color:"text-yellow-500"},{value:"low",label:"低",color:"text-green-500"}].map(o=>a.jsxs("button",{onClick:()=>s({priority:o.value}),className:C("w-full text-left px-3 py-2 rounded text-sm",r.priority===o.value?"bg-primary-light text-white dark:bg-primary-dark":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:[a.jsx("span",{className:o.color,children:"●"})," ",o.label]},o.value))]})]}),a.jsx("div",{className:"p-4 border-t border-border-light dark:border-border-dark",children:a.jsxs("button",{onClick:e,className:"w-full btn-secondary flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),"設定"]})})]})},zr=({task:t,onClose:e})=>{var d;const{addTask:r,updateTask:s,categories:n}=O(),[i,c]=v.useState({title:"",description:"",dueDate:k(new Date,"yyyy-MM-dd"),dueTime:"12:00",priority:"medium",category:((d=n[0])==null?void 0:d.id)||"",reminderEnabled:!1,reminderTime:"15"});v.useEffect(()=>{var l;t&&c({title:t.title,description:t.description||"",dueDate:k(t.dueDate,"yyyy-MM-dd"),dueTime:k(t.dueDate,"HH:mm"),priority:t.priority,category:t.category,reminderEnabled:((l=t.reminder)==null?void 0:l.enabled)||!1,reminderTime:"15"})},[t]);const o=l=>{l.preventDefault();const p=new Date(`${i.dueDate}T${i.dueTime}`),u={title:i.title,description:i.description||void 0,dueDate:p,priority:i.priority,category:i.category,completed:(t==null?void 0:t.completed)||!1,reminder:i.reminderEnabled?{enabled:!0,time:new Date(p.getTime()-parseInt(i.reminderTime)*6e4),notified:!1}:void 0};t?s(t.id,u):r(u),e()};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsx("h2",{className:"text-lg font-semibold",children:t?"タスクを編集":"新しいタスク"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("form",{onSubmit:o,className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:["タイトル ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:i.title,onChange:l=>c({...i,title:l.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"説明"}),a.jsx("textarea",{value:i.description,onChange:l=>c({...i,description:l.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"期限日"}),a.jsx("input",{type:"date",value:i.dueDate,onChange:l=>c({...i,dueDate:l.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"時刻"}),a.jsx("input",{type:"time",value:i.dueTime,onChange:l=>c({...i,dueTime:l.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"カテゴリ"}),a.jsx("select",{value:i.category,onChange:l=>c({...i,category:l.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",children:n.map(l=>a.jsx("option",{value:l.id,children:l.name},l.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"優先度"}),a.jsxs("select",{value:i.priority,onChange:l=>c({...i,priority:l.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"high",children:"高"}),a.jsx("option",{value:"medium",children:"中"}),a.jsx("option",{value:"low",children:"低"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:i.reminderEnabled,onChange:l=>c({...i,reminderEnabled:l.target.checked})}),a.jsx("span",{className:"text-sm font-medium",children:"リマインダーを設定"})]}),i.reminderEnabled&&a.jsxs("select",{value:i.reminderTime,onChange:l=>c({...i,reminderTime:l.target.value}),className:"mt-2 w-full px-3 py-2 border rounded focus:ring-2 focus:ring-primary-light dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"5",children:"5分前"}),a.jsx("option",{value:"15",children:"15分前"}),a.jsx("option",{value:"30",children:"30分前"}),a.jsx("option",{value:"60",children:"1時間前"}),a.jsx("option",{value:"1440",children:"1日前"})]})]}),a.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700",children:"キャンセル"}),a.jsx("button",{type:"submit",className:"btn-primary",children:t?"更新":"作成"})]})]})]})})},Xr=({onClose:t})=>{const{settings:e,updateSettings:r,categories:s,addCategory:n,updateCategory:i,deleteCategory:c}=O(),[o,d]=v.useState("general"),[l,p]=v.useState(""),[u,m]=v.useState("#4285F4"),f=async()=>{const b={tasks:await E.getTasks(),categories:s,settings:e,exportDate:new Date().toISOString()},D=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),T=URL.createObjectURL(D),j=document.createElement("a");j.href=T,j.download=`calendar-todo-backup-${Yr(new Date,"yyyy-MM-dd")}.json`,j.click(),URL.revokeObjectURL(T)},x=g=>{var T;const b=(T=g.target.files)==null?void 0:T[0];if(!b)return;const D=new FileReader;D.onload=async j=>{var M;try{const S=JSON.parse((M=j.target)==null?void 0:M.result);S.tasks&&(await E.saveTasks(S.tasks),O.setState({tasks:S.tasks})),S.categories&&(await E.saveCategories(S.categories),O.setState({categories:S.categories})),S.settings&&(await E.saveSettings(S.settings),O.setState({settings:S.settings})),alert("データのインポートが完了しました")}catch{alert("データのインポートに失敗しました")}},D.readAsText(b)},y=()=>{l.trim()&&(n({name:l,color:u,isDefault:!1}),p(""),m("#4285F4"))};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"設定"}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"flex border-b",children:[a.jsx("button",{onClick:()=>d("general"),className:`px-4 py-2 ${o==="general"?"border-b-2 border-primary-light dark:border-primary-dark":""}`,children:"一般"}),a.jsx("button",{onClick:()=>d("categories"),className:`px-4 py-2 ${o==="categories"?"border-b-2 border-primary-light dark:border-primary-dark":""}`,children:"カテゴリ"}),a.jsx("button",{onClick:()=>d("data"),className:`px-4 py-2 ${o==="data"?"border-b-2 border-primary-light dark:border-primary-dark":""}`,children:"データ"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[o==="general"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:"テーマ"}),a.jsxs("select",{value:e.theme,onChange:g=>r({theme:g.target.value}),className:"w-full px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600",children:[a.jsx("option",{value:"light",children:"ライト"}),a.jsx("option",{value:"dark",children:"ダーク"}),a.jsx("option",{value:"system",children:"システム設定に従う"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:"通知"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:e.notifications.enabled,onChange:g=>r({notifications:{...e.notifications,enabled:g.target.checked}})}),a.jsx("span",{className:"text-sm",children:"通知を有効にする"})]}),a.jsxs("label",{className:"flex items-center gap-2 ml-6",children:[a.jsx("input",{type:"checkbox",checked:e.notifications.sound,onChange:g=>r({notifications:{...e.notifications,sound:g.target.checked}}),disabled:!e.notifications.enabled}),a.jsx("span",{className:"text-sm",children:"通知音を鳴らす"})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:e.notifications.dailySummary,onChange:g=>r({notifications:{...e.notifications,dailySummary:g.target.checked}})}),a.jsx("span",{className:"text-sm",children:"日次サマリー (毎朝9時)"})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:e.notifications.weeklyReview,onChange:g=>r({notifications:{...e.notifications,weeklyReview:g.target.checked}})}),a.jsx("span",{className:"text-sm",children:"週次レビュー (毎週月曜9時)"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:"同期"}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:e.sync.enabled,onChange:g=>r({sync:{...e.sync,enabled:g.target.checked}})}),a.jsx("span",{className:"text-sm",children:"Chromeアカウント間で同期する"})]})]})]}),o==="categories"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:l,onChange:g=>p(g.target.value),placeholder:"新しいカテゴリ名",className:"flex-1 px-3 py-2 border rounded dark:bg-gray-700 dark:border-gray-600"}),a.jsx("input",{type:"color",value:u,onChange:g=>m(g.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),a.jsx("button",{onClick:y,className:"btn-primary",children:"追加"})]}),a.jsx("div",{className:"space-y-2",children:s.map(g=>a.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"color",value:g.color,onChange:b=>i(g.id,{color:b.target.value}),className:"w-8 h-8 border rounded cursor-pointer",disabled:g.isDefault}),a.jsx("span",{children:g.name}),g.isDefault&&a.jsx("span",{className:"text-xs text-gray-500",children:"(デフォルト)"})]}),!g.isDefault&&a.jsx("button",{onClick:()=>c(g.id),className:"text-red-500 hover:text-red-700",children:"削除"})]},g.id))})]}),o==="data"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:"エクスポート"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"すべてのタスク、カテゴリ、設定をJSON形式でエクスポートします。"}),a.jsx("button",{onClick:f,className:"btn-primary",children:"データをエクスポート"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:"インポート"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"エクスポートしたJSONファイルからデータを復元します。"}),a.jsx("input",{type:"file",accept:".json",onChange:x,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-primary-light file:text-white hover:file:opacity-90"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold mb-3",children:"データ削除"}),a.jsx("p",{className:"text-sm text-red-600 mb-2",children:"警告: この操作は取り消せません。すべてのデータが削除されます。"}),a.jsx("button",{onClick:async()=>{confirm("本当にすべてのデータを削除しますか？この操作は取り消せません。")&&(await E.clearAll(),window.location.reload())},className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"すべてのデータを削除"})]})]})]})]})})};function Yr(t,e){const r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return e.replace("yyyy",String(r)).replace("MM",s).replace("dd",n)}const Wr=()=>{const[t,e]=v.useState(!1),[r,s]=v.useState(!1),[n,i]=v.useState(null),{tasks:c,categories:o,settings:d}=O();v.useEffect(()=>{(async()=>{try{const[m,f,x]=await Promise.all([E.getTasks(),E.getCategories(),E.getSettings()]);m.length>0&&O.setState({tasks:m}),f.length>0&&O.setState({categories:f}),x&&O.setState({settings:x})}catch(m){console.error("Failed to load data from Chrome storage:",m)}})()},[]),v.useEffect(()=>{E.saveTasks(c)},[c]),v.useEffect(()=>{E.saveCategories(o)},[o]),v.useEffect(()=>{E.saveSettings(d)},[d]);const l=()=>{i(null),e(!0)},p=u=>{i(u),e(!0)};return a.jsx(rr,{backend:$r,children:a.jsxs("div",{className:"flex h-screen bg-background-light dark:bg-background-dark",children:[a.jsx(Vr,{onNewTask:l,onOpenSettings:()=>s(!0)}),a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(qr,{onEditTask:p})}),t&&a.jsx(zr,{task:n,onClose:()=>e(!1)}),r&&a.jsx(Xr,{onClose:()=>s(!1)})]})})};He.createRoot(document.getElementById("root")).render(a.jsx(Fe.StrictMode,{children:a.jsx(Wr,{})}));
