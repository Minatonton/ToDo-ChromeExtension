# Chrome拡張機能 カレンダー形式TODOアプリ 仕様書

## 1. 概要

### 1.1 プロジェクト名
Calendar TODO Chrome Extension

### 1.2 目的
Chrome拡張機能として動作する、カレンダー形式のTODOアプリケーション。
視覚的にタスクを管理し、日付ごとのタスク管理を直感的に行えるようにする。

### 1.3 主要機能
- カレンダービューでのタスク表示
- タスクの作成・編集・削除
- ドラッグ&ドロップによるタスクの日付変更
- タスクの優先度設定
- カテゴリ別タスク管理
- 通知機能

## 2. 機能要件

### 2.1 カレンダー機能

#### 2.1.1 カレンダー表示
- **月表示モード**: 1ヶ月分のカレンダーを表示
- **週表示モード**: 1週間分のカレンダーを表示
- **日表示モード**: 1日分の詳細タスクを表示
- **ミニカレンダー**: サイドバーに小型カレンダーを表示
- **今日の日付ハイライト**: 現在の日付を視覚的に強調

#### 2.1.2 ナビゲーション
- 前月/次月への移動
- 前週/次週への移動
- 今日の日付にジャンプ
- 年月を指定してジャンプ

### 2.2 TODO管理機能

#### 2.2.1 タスク作成
- **クイック追加**: ワンクリックでタスクを追加
- **詳細設定**:
  - タイトル（必須）
  - 説明文（任意）
  - 期限日時
  - 優先度（高・中・低）
  - カテゴリ選択
  - 繰り返し設定（毎日・毎週・毎月・毎年）
  - リマインダー設定

#### 2.2.2 タスク編集
- インライン編集
- 詳細編集モーダル
- 一括編集機能

#### 2.2.3 タスク削除
- 個別削除
- 完了タスクの一括削除
- ゴミ箱機能（削除後30日間は復元可能）

#### 2.2.4 タスク操作
- **チェックボックス**: タスクの完了/未完了切り替え
- **ドラッグ&ドロップ**: 日付間でのタスク移動
- **並び替え**: 優先度・作成日・期限順でソート
- **フィルタリング**:
  - ステータス（完了/未完了）
  - カテゴリ
  - 優先度
  - 期限（今日/今週/今月）

### 2.3 カテゴリ管理

#### 2.3.1 デフォルトカテゴリ
- 仕事
- プライベート
- 買い物
- 勉強
- 健康
- その他

#### 2.3.2 カスタムカテゴリ
- カテゴリの追加・編集・削除
- カテゴリ別の色設定
- アイコン設定

### 2.4 通知機能

#### 2.4.1 リマインダー通知
- 期限前通知（5分前・15分前・1時間前・1日前）
- Chrome通知APIを使用
- 通知音のON/OFF設定

#### 2.4.2 定期通知
- 日次サマリー（その日のタスク一覧）
- 週次レビュー（週間タスクサマリー）

### 2.5 データ管理

#### 2.5.1 データ保存
- Chrome Storage APIを使用したローカル保存
- 自動保存機能

#### 2.5.2 データ同期
- Chromeアカウント同期に対応
- 複数デバイス間でのデータ同期

#### 2.5.3 エクスポート/インポート
- JSON形式でのエクスポート
- CSVエクスポート
- バックアップファイルのインポート

### 2.6 検索機能
- タスクタイトル・説明文の全文検索
- 日付範囲指定検索
- カテゴリ・タグでの絞り込み検索

## 3. UI/UXデザイン仕様

### 3.1 全体レイアウト

#### 3.1.1 ポップアップビュー（拡張機能アイコンクリック時）
- サイズ: 400px × 600px
- 今日のタスク一覧
- クイック追加フォーム
- フルビューへのリンク

#### 3.1.2 フルページビュー
- 新しいタブで開く完全版インターフェース
- レスポンシブデザイン対応

### 3.2 コンポーネント構成

#### 3.2.1 ヘッダー
- アプリケーションタイトル
- 現在の年月表示
- ビュー切り替えボタン（月/週/日）
- 設定ボタン
- 検索バー

#### 3.2.2 サイドバー（左）
- ミニカレンダー
- カテゴリフィルター
- クイック統計（今日のタスク数、今週の完了率など）

#### 3.2.3 メインエリア
- カレンダーグリッド
- 各日付セル内にタスクリスト表示
- タスクのプレビュー表示

#### 3.2.4 タスクカード
- タスクタイトル
- 完了チェックボックス
- 優先度インジケーター
- カテゴリーカラーバッジ
- 期限時刻
- 編集・削除ボタン（ホバー時表示）

### 3.3 カラースキーム

#### 3.3.1 ライトテーマ
- 背景色: #FFFFFF
- メインカラー: #4285F4（Google Blue）
- アクセントカラー: #34A853（Google Green）
- テキスト: #202124
- ボーダー: #DADCE0

#### 3.3.2 ダークテーマ
- 背景色: #202124
- メインカラー: #8AB4F8
- アクセントカラー: #81C995
- テキスト: #E8EAED
- ボーダー: #5F6368

### 3.4 インタラクション

#### 3.4.1 アニメーション
- タスクの追加・削除時のフェードイン/アウト
- ドラッグ&ドロップ時のゴースト表示
- ページ遷移時のスライドアニメーション

#### 3.4.2 フィードバック
- 操作成功時のトースト通知
- エラー時の警告表示
- ローディング表示

## 4. 技術仕様

### 4.1 開発環境
- **言語**: TypeScript
- **フレームワーク**: React 18
- **ビルドツール**: Vite
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand
- **日付処理**: date-fns

### 4.2 Chrome Extension構成

#### 4.2.1 Manifest V3
```json
{
  "manifest_version": 3,
  "name": "Calendar TODO",
  "version": "1.0.0",
  "description": "カレンダー形式のTODO管理拡張機能",
  "permissions": [
    "storage",
    "alarms",
    "notifications"
  ],
  "action": {
    "default_popup": "popup.html",
    "default_icon": {
      "16": "icon16.png",
      "32": "icon32.png",
      "48": "icon48.png",
      "128": "icon128.png"
    }
  },
  "background": {
    "service_worker": "background.js"
  },
  "options_page": "options.html"
}
```

#### 4.2.2 ファイル構成
```
/
├── manifest.json
├── src/
│   ├── popup/           # ポップアップUI
│   ├── options/          # 設定ページ
│   ├── background/       # バックグラウンドサービスワーカー
│   ├── components/       # 共通コンポーネント
│   ├── hooks/           # カスタムフック
│   ├── store/           # 状態管理
│   ├── utils/           # ユーティリティ関数
│   └── types/           # TypeScript型定義
├── public/
│   ├── icons/           # アイコンファイル
│   └── locales/         # 多言語対応ファイル
└── dist/                # ビルド出力
```

### 4.3 データスキーマ

#### 4.3.1 タスクデータ
```typescript
interface Task {
  id: string;
  title: string;
  description?: string;
  dueDate: Date;
  priority: 'high' | 'medium' | 'low';
  category: string;
  completed: boolean;
  createdAt: Date;
  updatedAt: Date;
  reminder?: {
    enabled: boolean;
    time: Date;
    notified: boolean;
  };
  recurrence?: {
    type: 'daily' | 'weekly' | 'monthly' | 'yearly';
    interval: number;
    endDate?: Date;
  };
}
```

#### 4.3.2 カテゴリデータ
```typescript
interface Category {
  id: string;
  name: string;
  color: string;
  icon?: string;
  isDefault: boolean;
}
```

### 4.4 API設計

#### 4.4.1 Chrome Storage API
- `chrome.storage.local`: 大容量データの保存
- `chrome.storage.sync`: 同期データの保存

#### 4.4.2 Chrome Alarms API
- リマインダー通知のスケジューリング

#### 4.4.3 Chrome Notifications API
- デスクトップ通知の表示

## 5. セキュリティ要件

### 5.1 データ保護
- ローカルストレージのデータ暗号化
- XSS対策（入力値のサニタイゼーション）
- Content Security Policy設定

### 5.2 権限管理
- 最小限の権限要求
- オプション機能の権限は個別に要求

## 6. パフォーマンス要件

### 6.1 レスポンス時間
- ポップアップ表示: 100ms以内
- タスク操作: 50ms以内
- カレンダー切り替え: 200ms以内

### 6.2 メモリ使用量
- 最大メモリ使用量: 50MB以下
- アイドル時メモリ: 20MB以下

### 6.3 データ制限
- 最大タスク数: 10,000件
- 最大カテゴリ数: 50件

## 7. テスト計画

### 7.1 単体テスト
- Jest + React Testing Library
- カバレッジ目標: 80%以上

### 7.2 E2Eテスト
- Puppeteer
- 主要ユーザーフローのテスト

### 7.3 ブラウザ互換性テスト
- Chrome最新版および過去2バージョン
- Edge（Chromium版）

## 8. 今後の拡張機能（フェーズ2）

### 8.1 追加機能案
- Google Calendar連携
- チーム共有機能
- AI による タスク提案
- ポモドーロタイマー統合
- 統計・分析ダッシュボード
- モバイルアプリ連携

### 8.2 国際化対応
- 日本語
- 英語
- 中国語
- 韓国語

## 9. リリース計画

### 9.1 フェーズ1（MVP）
- 基本的なカレンダー表示
- タスクCRUD機能
- カテゴリ管理
- リリース予定: 開発開始から2ヶ月

### 9.2 フェーズ2
- 通知機能
- データ同期
- 検索機能
- リリース予定: フェーズ1から1ヶ月後

### 9.3 フェーズ3
- 高度な機能（8.1参照）
- リリース予定: フェーズ2から2ヶ月後

## 10. ドキュメント

### 10.1 開発者向け
- README.md
- CONTRIBUTING.md
- API仕様書

### 10.2 ユーザー向け
- 使い方ガイド
- FAQ
- トラブルシューティング

---

作成日: 2025-12-11
バージョン: 1.0.0